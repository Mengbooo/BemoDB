# JavaScript 基础

::: tip
这里顺顺 JavaScript 的一些基本语法，我们聚焦于这个语言的本身，然后来尝试一些 JavaScript Info 里的小练习。
:::

## 我该如何运行 JavaScript 文件？

我们需要做一些前置准备：我们需要一个工作环境来运行我们的脚本。

### By `<script>`

几乎可以使用 `<script>` 标签将 JavaScript 程序插入到 HTML 文档的任何位置。

### By Node

对于 Node，你只需要使用诸如 "node my.js" 的命令行来执行它。

## 自动分号插入（ASI）

在类如下面的代码中，JavaScript 会将换行符理解成“隐式”的分号：

```JavaScript
alert('Hello')
alert('World')
```

但是这并不代表所有情况都会进行自动分号插入，有时候 JavaScript 无法确定是否需要插入分号，故而最好在语句结束的时候**显式使用分号**，例如：

```JavaScript
alert("Hello")
[1, 2].forEach(alert);
// 会被引擎解析为：alert("Hello")[1, 2].forEach(alert);
```

## 注释

如上面的示例代码，注释就是 `//`，对于多行需要注释，可以使用`/* */`，但是需要注意的是，JavaScript**并不支持注释嵌套**（不要在 `/*...*/` 内嵌套另一个 `/*...*/` plz）

## 关于 “ use strict ”

我们在文档首页中提到了 JavaScript 的语言特性，一方面这解决了一部分兼容性问题，但是也保留了一些 JavaScript 的一些令人不愉快的使用体验。直到 ES5 的出现（它增加了新的语言特性和修改了一部分语言特性），添加了一个特殊**指令**，关闭时 ES5 的大部分修改不会生效，开启后则会激活这些新的特性。
使用时，我们需要注意：

- 确保 “ use strict ” 出现在脚本最顶部（其实也可以放在函数体内部的开头，但一般不这么做）
- 没有类似于 "no use strict" 这样的指令可以使程序返回默认模式：一旦进入了严格模式，就没有回头路了。
- 使用 DevTool 运行代码时，默认不会启用 “use strict”
- 在 ES6 及以后的版本中，JavaScript 引入了模块系统（import 和 export）。默认情况下，模块内部的代码会自动以严格模式运行，无需显式添加 use strict。
::: warning 我们应该使用 “use strict” 吗？
  MDN 参考：如果你想改变你的代码，让其工作在具有限制性 JavaScript 环境中，请参阅转换成严格模式：

https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode
:::
::: tip ESlint 与 use strict
ESLint 是静态代码分析工具，它在代码运行之前进行检查；而 use strict 是在代码运行时起作用，能捕获一些运行时才会出现的问题。例如，严格模式下对 this 值的处理更为严格，在某些情况下，只有在代码运行时才能发现 this 的使用是否符合严格模式的规则。除此之外，use strict 引入了一些 JavaScript 语言层面的特性改变，这些是 ESLint 无法通过规则完全模拟的，但是可以通过配置 ESlint 实现一部分的 use strict 功能
:::

## 变量

变量 是**数据的“命名存储”**。我们可以使用变量来保存各类信息，用let来声明变量（var也可以，但是存在冒泡问题，后面会写一个小节来介绍它）

JavaScript 的变量命名有两个限制：

- 变量名称必须仅包含字母、数字、符号 $ 和 \_。
- 首字符必须非数字。
- 不要使用[保留字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords)

命名包括多个单词，通常采用驼峰式命名法（camelCase）嗯。就像括号里的英文词语一样。

## 常量

声明一个常数（不变）变量，可以使用 const 而非 let，它们不能被修改，如果你尝试修改就会发现报错，它的命名方式通常也采用驼峰式命名法（camelCase），但有的时候会采取大写命名。
::: details 我该什么时候使用大写命名常量
作为一个“常数”，意味着值永远不变。但是有些常量在执行之前就已知了（比如红色的十六进制值），还有些在执行期间被“计算”出来，但初始赋值之后就不会改变。
例如：

```Javascript
const pageLoadTime = /* 网页加载所需的时间 */;
```

pageLoadTime 的值在页面加载之前是未知的，所以采用常规命名。但是它仍然是个常量，因为赋值之后不会改变。

换句话说，大写命名的常量仅用作“硬编码（hard-coded）”值的别名。
:::

## 良好的命名方式
一些可以遵循的规则：

- 使用易读的命名，比如 userName 或者 shoppingCart。
- 离诸如 a、b、c 这种缩写和短名称远一点，除非你真的知道你在干什么。
- 变量名在能够准确描述变量的同时要足够简洁。不好的例子就是 data 和 value，这样的名称等于什么都没说。如果能够非常明显地从上下文知道数据和值所表达的含义，这样使用它们也是可以的。
- 脑海中的术语要和团队保持一致。如果网站的访客称为“用户”，则我们采用相关的变量命名，比如 currentUser 或者 newUser，而不要使用 currentVisitor 或者一个 newManInTown。
::: tip 重用还是新建？
额外声明一个变量绝对是利大于弊的。

现代的 JavaScript 压缩器和浏览器都能够很好地对代码进行优化，所以不会产生性能问题。为不同的值使用不同的变量可以帮助引擎对代码进行优化。
:::

## 数据类型
JavaScript 的值都具有特定的类型：有 8 种基本的数据类型（7 种原始类型和 1 种引用类型）:
- 7种原始数据类型（基本数据类型）：
    - number 用于任何类型的数字：整数或浮点数，在 ±(253-1) 范围内的整数，还包括所谓的“特殊数值（“special numeric values”）”也属于这种类型：Infinity、-Infinity 和 NaN
      - NaN 代表一个计算错误。它是一个不正确的或者一个未定义的数学操作所得到的结果
      - Infinity 代表数学概念中的 无穷大 ∞。是一个比任何数字都大的特殊值，可以用1/0得到。
    - bigint 用于任意长度的整数。
      - 可以通过将 n 附加到整数字段的末尾来创建 BigInt 值。
      - 是比较新的一种类型，我现在其实基本上没有接触到要使用它的场景
    - string 用于字符串：一个字符串可以包含 0 个或多个字符，所以没有单独的单字符类型。
      - 有三种包含字符串的方式：双引号、单引号、反引号
      - 其中反引号是 `功能扩展` 引号。它们允许我们通过将变量和表达式包装在` ${…} `中，来将它们嵌入到字符串中。
    - boolean 用于表示 true 和 false
    - null 用于未知的值 —— 只有一个 null 值的独立类型
      - 不是一个“对不存在的 object 的引用”或者 “null 指针”。JavaScript 中的 null 仅仅是一个代表`“无”、“空”或“值未知”`的特殊值。
    - undefined 用于未定义的值 —— 只有一个 undefined 值的独立类型。
      - undefined 的含义是 `未被赋值`。
    - symbol 用于唯一的标识符。
- 以及1种非原始数据类型（复杂数据类型）：
    - object 用于更复杂的数据结构。

当我们想要分别处理不同类型值的时候，或者想快速进行数据类型检验时，就可以使用 `typeof` ，它是一个`运算符`，能够以`字符串`的形式来返回参数的类型：
``` javascript
typeof x
// or
typeof (x)
```
::: details typeof的特殊情况
- Math 是一个提供数学运算的内建 object。
- typeof null 的结果为 "object"。这是官方承认的 typeof 的错误，这个问题来自于 JavaScript 语言的早期阶段，并为了兼容性而保留了下来。null 绝对不是一个 object。null 有自己的类型，它是一个特殊值。typeof 的行为在这里是错误的。
- typeof alert 的结果是 "function"，因为 alert 在 JavaScript 语言中是一个函数。但是在 JavaScript 语言中没有一个特别的 “function” 类型。函数隶属于 object 类型。但是 typeof 会对函数区分对待，并返回 "function"。这也是来自于 JavaScript 语言早期的问题。从技术上讲，这种行为是不正确的，但在实际编程中却非常方便。
:::
::: tip “动态类型”
JavaScript是个弱类型语言，它允许将任何类型的值存入变量，例如，一个变量可以在前一刻是个字符串，下一刻就存储一个数字，也就是说：

**定义的变量并不会在定义后，被限制为某一数据类型**

Typescript则解决了这一点。
:::
::: details null 和 undefined 的使用场景
#### null
null 是一个原始值，表示有意为之的 “空值” 或 “无对象”。它通常是开发者主动将变量赋值为 null，用来明确表示这个变量不指向任何对象。
- **初始化变量**：当你需要一个变量在开始时不引用任何对象，后续可能会被赋值为一个有效的对象时，可以将其初始化为 null。
- **清空对象引用**：当你想要释放一个对象占用的内存，并且明确表示该变量不再指向任何对象时，可以将其赋值为 null。这样，JavaScript 的垃圾回收机制可以更有效地回收该对象所占用的内存。
- **函数返回值**：当函数没有合适的对象可以返回时，可以返回 null 来表示这种情况。
#### undefined
undefined 表示变量已声明但未赋值，或者函数没有返回值，又或者函数调用时缺少实参。它代表一种 “未定义” 的状态。
- **变量声明但未赋值**：当你声明一个变量但没有为其赋值时，该变量的默认值就是 undefined。
- **函数缺少返回值**：如果函数没有使用 return 语句返回值，那么函数的返回值就是 undefined。
- **函数调用时缺少实参**：当调用函数时，如果没有提供某个参数，那么该参数的值就是 undefined。
:::





## Task
